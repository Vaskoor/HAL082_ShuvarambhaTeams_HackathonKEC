{"docstore/metadata": {"736485de-78c3-43bb-977d-e35053bbe1f0": {"doc_hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd"}, "adc1effc-473a-4efa-be87-2ad8ecb52a69": {"doc_hash": "bf7718ee2c4654498ac70c8397afc6c8c9b01bd7a7190ab473aba3b6a7af551d", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}, "26f038ff-551f-4d78-8b91-80b064d779a3": {"doc_hash": "e9118739565aca3c323bf27e061639db87e31c1f0f5850507d9a18751c457e95", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}, "781ab734-8093-46d0-bb07-6551e10e10ac": {"doc_hash": "922aa8d815ca26303e625cdf35d71e6eb45bf8162445926d1864b3e0513a3c65", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}, "9412f884-814a-4338-ae5e-96a877f45c0e": {"doc_hash": "6ff7a8120b610fa9fcd7edf701f1fe32253ab218e5bc37dc29379469acf95c2f", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}, "8d0ad876-6ad3-463e-9c9c-33898e8a60f9": {"doc_hash": "5f7f610b3a3e7233207eaf7cefc4651f22eaf62ca19c6a204a23c1419c775795", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}, "8157c9ac-17e5-4323-8e62-1a9abaccf439": {"doc_hash": "2e736f345825f89b5910f567b53eb9c401638efd574537c74f16497e8c57f68a", "ref_doc_id": "736485de-78c3-43bb-977d-e35053bbe1f0"}}, "docstore/ref_doc_info": {"736485de-78c3-43bb-977d-e35053bbe1f0": {"node_ids": ["adc1effc-473a-4efa-be87-2ad8ecb52a69", "26f038ff-551f-4d78-8b91-80b064d779a3", "781ab734-8093-46d0-bb07-6551e10e10ac", "9412f884-814a-4338-ae5e-96a877f45c0e", "8d0ad876-6ad3-463e-9c9c-33898e8a60f9", "8157c9ac-17e5-4323-8e62-1a9abaccf439"], "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}}}, "docstore/data": {"adc1effc-473a-4efa-be87-2ad8ecb52a69": {"__data__": {"id_": "adc1effc-473a-4efa-be87-2ad8ecb52a69", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26f038ff-551f-4d78-8b91-80b064d779a3", "node_type": "1", "metadata": {}, "hash": "168b02188bda6a3137ed97c0da066ccfc6f4a24365229b2477f1ae4a9a30b068", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# RAG Chatbot System\n\nA complete **Retrieval-Augmented Generation (RAG)** chatbot system built with **Laravel**, **Python/FastAPI**, and **Ollama** for local LLM inference. The system allows you to upload PDF documents, create AI chatbots trained on those documents, and embed chat widgets on any website.\n\n## Architecture Overview\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Website       \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Laravel Backend \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Python RAG     \u2502\n\u2502   (Widget)      \u2502\u25c4\u2500\u2500\u2500\u2500\u2502  (PHP)           \u2502\u25c4\u2500\u2500\u2500\u2500\u2502  (FastAPI)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502                           \u2502\n                               \u25bc                           \u25bc\n                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                        \u2502   MySQL      \u2502          \u2502   FAISS Vector  \u2502\n                        \u2502   Database   \u2502          \u2502   Store         \u2502\n                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                               \u2502\n                                                               \u25bc\n                                                      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                                      \u2502   Ollama LLM    \u2502\n                                                      \u2502   (Local AI)    \u2502\n                                                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n## Features\n\n- **PDF Document Management**: Upload PDFs, automatic text extraction and chunking\n- **Vector Embeddings**: Sentence-transformers for document embeddings\n- **FAISS Vector Store**: Fast similarity search for document retrieval\n- **Local LLM Integration**: Ollama for privacy-focused AI responses\n- **Embeddable Widget**: JavaScript widget for any website\n- **Multi-Chatbot Support**: Create multiple chatbots with different document sets\n- **Conversation History**: Persistent threads for users and guests\n- **Domain Whitelist**: Security control for widget embedding\n- **Guest & User Support**: Works for both authenticated and anonymous users\n\n## Quick Start\n\n### Prerequisites\n\n- Docker & Docker Compose\n- Git\n\n### Installation\n\n1. **Clone the repository**\n   ```bash\n   git clone <repository-url>\n   cd rag-chatbot-system\n   ```\n\n2.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2294, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26f038ff-551f-4d78-8b91-80b064d779a3": {"__data__": {"id_": "26f038ff-551f-4d78-8b91-80b064d779a3", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "adc1effc-473a-4efa-be87-2ad8ecb52a69", "node_type": "1", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "bf7718ee2c4654498ac70c8397afc6c8c9b01bd7a7190ab473aba3b6a7af551d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "781ab734-8093-46d0-bb07-6551e10e10ac", "node_type": "1", "metadata": {}, "hash": "48c160b3a3313ebf462d0abc26c56aba279e7891c04cf649480aad2d2c0526d9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**Clone the repository**\n   ```bash\n   git clone <repository-url>\n   cd rag-chatbot-system\n   ```\n\n2. **Start all services**\n   ```bash\n   docker-compose up -d\n   ```\n\n3. **Install Laravel dependencies**\n   ```bash\n   docker-compose exec laravel composer install\n   ```\n\n4. **Run Laravel migrations**\n   ```bash\n   docker-compose exec laravel php artisan migrate\n   ```\n\n5. **Generate Laravel app key**\n   ```bash\n   docker-compose exec laravel php artisan key:generate\n   ```\n\n6.", "mimetype": "text/plain", "start_char_idx": 2193, "end_char_idx": 2673, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "781ab734-8093-46d0-bb07-6551e10e10ac": {"__data__": {"id_": "781ab734-8093-46d0-bb07-6551e10e10ac", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26f038ff-551f-4d78-8b91-80b064d779a3", "node_type": "1", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "e9118739565aca3c323bf27e061639db87e31c1f0f5850507d9a18751c457e95", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9412f884-814a-4338-ae5e-96a877f45c0e", "node_type": "1", "metadata": {}, "hash": "ce45c907e9b460874f2b055accd2554c0460d162d505d05715b2d04496aa7385", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**Generate Laravel app key**\n   ```bash\n   docker-compose exec laravel php artisan key:generate\n   ```\n\n6. **Pull Ollama model**\n   ```bash\n   docker-compose exec ollama ollama pull llama2\n   ```\n\n### Access Points\n\n| Service | URL | Description |\n|---------|-----|-------------|\n| Laravel API | http://localhost:8000 | Main API backend |\n| Python RAG | http://localhost:8001 | RAG service docs |\n| Ollama | http://localhost:11434 | LLM service |\n\n## API Documentation\n\n### Widget Endpoints (Public)\n\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/widget/send-message` | POST | Send message to chatbot |\n| `/api/widget/history` | GET | Get conversation history |\n| `/api/widget/config/{id}` | GET | Get chatbot configuration |\n| `/api/widget/health` | GET | Health check |\n\n### Admin Endpoints (Authenticated)\n\n#### Files\n- `GET /api/files` - List all files\n- `POST /api/files/upload` - Upload PDF\n- `POST /api/files/{id}/vectorize` - Vectorize file\n- `DELETE /api/files/{id}` - Delete file\n\n#### Chatbots\n- `GET /api/chatbots` - List chatbots\n- `POST /api/chatbots` - Create chatbot\n- `GET /api/chatbots/{id}` - Get chatbot\n- `PUT /api/chatbots/{id}` - Update chatbot\n- `DELETE /api/chatbots/{id}` - Delete chatbot\n- `POST /api/chatbots/{id}/files` - Add files to chatbot\n\n#### Threads & Messages\n- `GET /api/threads/user` - List user's threads\n- `GET /api/chatbots/{id}/threads` - List chatbot threads\n- `GET /api/threads/{id}/messages` - Get thread messages\n\n## Widget Integration\n\nAdd the chatbot widget to any website:\n\n```html\n<!-- Add the widget script -->\n<script src=\"https://your-api.com/widget/rag-widget.js\"></script>\n\n<!-- Initialize the widget -->\n<script>\n  RAGWidget.init({\n    chatbotId: 1,\n    apiUrl: 'https://your-api.", "mimetype": "text/plain", "start_char_idx": 2567, "end_char_idx": 4338, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9412f884-814a-4338-ae5e-96a877f45c0e": {"__data__": {"id_": "9412f884-814a-4338-ae5e-96a877f45c0e", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "781ab734-8093-46d0-bb07-6551e10e10ac", "node_type": "1", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "922aa8d815ca26303e625cdf35d71e6eb45bf8162445926d1864b3e0513a3c65", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d0ad876-6ad3-463e-9c9c-33898e8a60f9", "node_type": "1", "metadata": {}, "hash": "2b36c2521a7cb4d8d9517867e78c8650e66077af47f7e28aa98a213089e10381", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "init({\n    chatbotId: 1,\n    apiUrl: 'https://your-api.com',\n    position: 'bottom-right',\n    primaryColor: '#3B82F6'\n  });\n</script>\n```\n\n### Widget Configuration Options\n\n| Option | Type | Default | Description |\n|--------|------|---------|-------------|\n| `chatbotId` | number | required | Chatbot ID |\n| `apiUrl` | string | required | API base URL |\n| `userId` | number | null | User ID for authenticated users |\n| `position` | string | 'bottom-right' | Widget position |\n| `primaryColor` | string | '#3B82F6' | Theme color |\n| `welcomeMessage` | string | auto | Custom welcome message |\n\n## Database Schema\n\n### Tables\n\n- **rag_files**: Uploaded PDF files\n- **chatbots**: Chatbot configurations\n- **chatbot_rag_files**: Many-to-many relationship\n- **chat_threads**: Conversation threads\n- **chat_messages**: Individual messages\n\nSee `laravel-backend/database/migrations/` for full schema details.", "mimetype": "text/plain", "start_char_idx": 4283, "end_char_idx": 5185, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8d0ad876-6ad3-463e-9c9c-33898e8a60f9": {"__data__": {"id_": "8d0ad876-6ad3-463e-9c9c-33898e8a60f9", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9412f884-814a-4338-ae5e-96a877f45c0e", "node_type": "1", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6ff7a8120b610fa9fcd7edf701f1fe32253ab218e5bc37dc29379469acf95c2f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8157c9ac-17e5-4323-8e62-1a9abaccf439", "node_type": "1", "metadata": {}, "hash": "4a27f4d887976eb6d23a99d7171bfdff6f191c13957789225a8b16b28b64b35c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## Configuration\n\n### Environment Variables\n\n#### Laravel (.env)\n```env\nDB_CONNECTION=mysql\nDB_HOST=mysql\nDB_DATABASE=rag_chatbot\nDB_USERNAME=rag_user\nDB_PASSWORD=rag_password\n\nRAG_SERVICE_URL=http://python-rag:8000\nOLLAMA_URL=http://ollama:11434\n```\n\n#### Python RAG (.env)\n```env\nOLLAMA_URL=http://ollama:11434\nOLLAMA_MODEL=llama2\nEMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2\nVECTOR_STORE_PATH=./vector_store\n```\n\n## Development\n\n### Local Development (without Docker)\n\n#### Laravel Backend\n```bash\ncd laravel-backend\ncomposer install\ncp .env.example .env\nphp artisan key:generate\nphp artisan migrate\nphp artisan serve\n```\n\n#### Python RAG Backend\n```bash\ncd python-rag-backend\npython -m venv venv\nsource venv/bin/activate  # Windows: venv\\Scripts\\activate\npip install -r requirements.txt\nuvicorn main:app --reload\n```\n\n### Running Tests\n\n```bash\n# Laravel tests\ndocker-compose exec laravel php artisan test\n\n# Python tests\ndocker-compose exec python-rag pytest\n```\n\n## Customization\n\n### Changing the LLM Model\n\n1. Pull a new model in Ollama:\n   ```bash\n   docker-compose exec ollama ollama pull mistral\n   ```\n\n2. Update `OLLAMA_MODEL` in environment variables\n\n3.", "mimetype": "text/plain", "start_char_idx": 5187, "end_char_idx": 6365, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8157c9ac-17e5-4323-8e62-1a9abaccf439": {"__data__": {"id_": "8157c9ac-17e5-4323-8e62-1a9abaccf439", "embedding": null, "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "736485de-78c3-43bb-977d-e35053bbe1f0", "node_type": "4", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "6fb021a4a411b5fccb6fb439d32ca9b4252ea2249668dd1bd9f1f9002f4563fd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d0ad876-6ad3-463e-9c9c-33898e8a60f9", "node_type": "1", "metadata": {"user_id": "1", "file_name": "README (2).md", "category": "general", "quality": "medium"}, "hash": "5f7f610b3a3e7233207eaf7cefc4651f22eaf62ca19c6a204a23c1419c775795", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Update `OLLAMA_MODEL` in environment variables\n\n3. Restart services:\n   ```bash\n   docker-compose restart python-rag\n   ```\n\n### Adjusting Chunk Size\n\nEdit `python-rag-backend/.env`:\n```env\nCHUNK_SIZE=1024\nCHUNK_OVERLAP=100\n```\n\n### Custom Embedding Model\n\n```env\nEMBEDDING_MODEL=sentence-transformers/all-mpnet-base-v2\n```\n\n## Troubleshooting\n\n### Common Issues\n\n**Ollama model not found**\n```bash\ndocker-compose exec ollama ollama pull llama2\n```\n\n**Permission errors with storage**\n```bash\ndocker-compose exec laravel chown -R www-data:www-data storage\n```\n\n**Vector store issues**\n```bash\n# Clear vector store\ndocker-compose exec python-rag rm -rf /app/vector_store/*\n```\n\n### Logs\n\n```bash\n# Laravel logs\ndocker-compose logs -f laravel\n\n# Python RAG logs\ndocker-compose logs -f python-rag\n\n# Ollama logs\ndocker-compose logs -f ollama\n```\n\n## Production Deployment\n\n1. **Update environment variables** for production\n2. **Enable SSL** with Nginx\n3. **Set up proper CORS** configuration\n4. **Configure backups** for MySQL and vector store\n5. **Set up monitoring** and alerting\n\nSee `docker-compose.yml` for production profile with Nginx.\n\n## Technology Stack\n\n| Component | Technology |\n|-----------|------------|\n| Backend API | Laravel 12 (PHP 8.2) |\n| RAG Service | FastAPI (Python 3.11) |\n| Database | MySQL 8.0 |\n| Vector DB | FAISS |\n| Embeddings | sentence-transformers |\n| LLM | Ollama (local) |\n| Cache | Redis 7 |\n| Container | Docker |\n\n## License\n\nMIT License - see LICENSE file for details.\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Commit your changes\n4. Push to the branch\n5. Create a Pull Request\n\n## Support\n\nFor issues and questions, please use the GitHub issue tracker.", "mimetype": "text/plain", "start_char_idx": 6315, "end_char_idx": 8035, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}}}